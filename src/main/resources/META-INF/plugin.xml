<idea-plugin require-restart="true">
    <id>dev.eca.eca-intellij</id>
    <name>ECA</name>
    <vendor url="https://github.com/editor-code-assistant/eca-intellij">eca-intellij</vendor>
    <description><![CDATA[
        ECA (Editor Code Assistant) - AI pair programming capabilities agnostic of editor.
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="com.github.ericdallo.clj4intellij.extension.NREPLStartup"/>
        <postStartupActivity id="EcaInitDb" implementation="dev.eca.eca_intellij.extension.init_db_startup.InitDBStartup"/>
        <postStartupActivity order="after EcaInitDb"
                             id="EcaStartServer"
                             implementation="dev.eca.eca_intellij.extension.init_server_startup.InitServerStartup"/>
        <postStartupActivity implementation="dev.eca.eca_intellij.extension.register_actions_startup.RegisterActionsStartup" order="after EcaInitDb"/>
        <applicationService serviceImplementation="dev.eca.eca_intellij.extension.SettingsState"/>
        <applicationConfigurable
            parentId="tools"
            instance="dev.eca.eca_intellij.extension.general_settings.GeneralSettingsConfigurable"
            id="dev.eca.eca_intellij.extension.general_settings.GeneralSettingsConfigurable"
            displayName="ECA"/>
        <statusBarWidgetFactory
            id="EcaStatusBar"
            displayName="ECA"
            order="first"
            implementation="dev.eca.eca_intellij.extension.status_bar_factory.EcaStatusBarFactory" />
        <toolWindow
            id="ECA"
            icon="com.github.clojure_repl.intellij.Icons.ECA"
            secondary="true"
            factoryClass="dev.eca.eca_intellij.extension.tool_window.EcaToolWindowFactory" />
        <notificationGroup id="ECA notifications" displayType="BALLOON"/>
    </extensions>

    <applicationListeners>
        <listener topic="com.intellij.ide.AppLifecycleListener"
                  class="com.github.ericdallo.clj4intellij.listener.ClojureClassLoaderListener"/>
    </applicationListeners>

    <projectListeners>
        <listener topic="com.intellij.openapi.editor.ex.FocusChangeListener"
                  class="dev.eca.eca_intellij.listener.file.FileListener"/>
    </projectListeners>
</idea-plugin>
